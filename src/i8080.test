;
;  8080 Processor tests
;
; STC
dep 100 37
; CMC
dep 101 3F
; CMA
dep 102 2F

;
;  Verify STC instruction
go 100
step
;  Verify carry flag is set and all registers, except PC are zero.
;  PC should be 0101.
reg
;  Verify CMC instruction
step
;  Verify carry flag is cleared and all registers, except PC are zero.
;  PC should be 0102.
reg
;  Verify CMA instruction
step
;  Verify register A is FF, PC is 103, and all other registers are zero.
reg
; MVI B,DE
dep 103 06
dep 104 DE
; MVI C,AD
dep 105 0E
dep 106 AD
; MVI D,BE
dep 107 16
dep 108 BE
; MVI E,EF
dep 109 1E
dep 10A EF
; MVI H,10
dep 10B 26
dep 10C 10
; MVI L,10
dep 10D 2E
dep 10E 01
; MVI M,12
dep 10F 36
dep 110 12
; MVI A,34
dep 111 3E
dep 112 34
;  Verify MVI B,DE
step
;  Verify that register B is DE and PC is 105
reg
; Verify MVI C,AD
step
; Verify that register C is AD and PC is 107
reg
;  Verify MVI D,BE
step
;  Verify that register D is BE and PC is 109
reg
; Verify MVI E,EF
step
; Verify that register E is EF and PC is 10B
reg
;  Verify MVI H,10
step
;  Verify that register H is 10 and PC is 10D
reg
; Verify MVI L,01
step
; Verify that register L is 01 and PC is 10F
reg
;  Verify MVI M,12
step
;  Verify that memory location 1001 is 12 and PC is 111
reg
dump 1000
; Verify MVI A,34
step
; Verify that register A is 34 and PC is 113
reg
; NOP
dep 113 0
; Verify NOP
step
; Verify that registers are unchanged except PC is 114
reg
; MOV B,B (effectively a NOP)
dep 114 40
; MOV B,C
dep 115 41
; MOV B,D
dep 116 42
; MOV B,E
dep 117 43
; MOV B,H
dep 118 44
; MOV B,L
dep 119 45
; MOV B,M (address 100)
dep 11A 46
dep 11B 00
dep 11C 01
; MOV B,A
dep 11D 47
;  Restore B
; MVI B,DE
dep 11E 06
dep 11F DE
; MOV C,B
dep 120 48
; MOV C,C (effectively a NOP)
dep 121 49
; MOV C,D
dep 122 4A
; MOV C,E
dep 123 4B
; MOV C,H
dep 124 4C
; MOV C,L
dep 125 4D
; MOV C,M (address 102)
dep 126 4E
dep 127 02
dep 128 01
; MOV C,A
dep 129 4F
; Restore C
; MVI C,AD
dep 12A 0E
dep 12B AD
; MOV D,B
dep 12C 50
; MOV D,C
dep 12D 51
; MOV D,D (effectively a NOP)
dep 12E 52
; MOV D,E
dep 12F 53
; MOV D,H
dep 130 54
; MOV D,L
dep 131 55
; MOV D,M (address 109)
dep 132 56
dep 133 09
dep 134 01
;MOV D,A
dep 135 57
; Restore D
; MVI D,BE
dep 136 16
dep 137 BE
; MOV E,B
dep 138 58
; MOV E,C
dep 139 59
; MOV E,D
dep 13A 5A
; MOV E,E (effectively a NOP)
dep 13B 5B
; MOV E,H
dep 13C 5C
; MOV E,L
dep 13D 5D
; MOV E,M (address 129)
dep 13E 5E
dep 13F 29
dep 140 01
; MOV E,A
dep 141 5F
; Restore E
; MVI E,EF
dep 142 1E
dep 143 EF
; MOV H,B
dep 144 60
; MOV H,C
dep 145 61
; MOV H,D
dep 146 62
; MOV H,E
dep 147 63
; MOV H,H (effectively a NOP)
dep 148 64
; MOV H,L
dep 149 65
; MOV H,M (address 13A)
dep 14A 66
dep 14B 3A
dep 14C 01
; MOV H,A
dep 14D 67
; Restore H
; MVI H,10
dep 14E 26
dep 14F 10
; MOV L,B
dep 150 68
; MOV L,C
dep 151 69
; MOV L,D
dep 152 6A
; MOV L,E
dep 153 6B
; MOV L,H
dep 154 6C
; MOV L,L (effectively a NOP)
dep 155 6D
; MOV L,M (address 146)
dep 156 6E
dep 157 46
dep 158 01
; MOV L,A
dep 159 6F
; Restore L
; MVI L,01
dep 15A 2E
dep 15B 01
; MOV M,B (address 1010)
dep 15C 70
dep 15D 10
dep 15E 10
; MOV M,C (address 1011)
dep 15F 71
dep 160 11
dep 161 10
; MOV M,D (address 1012)
dep 162 72
dep 163 12
dep 164 10
; MOV M,E (address 1013
dep 165 73
dep 166 13
dep 167 10
; MOV M,H (address 1014)
dep 168 74
dep 169 14
dep 16A 10
; MOV M,L (address 1015)
dep 16B 75
dep 16C 15
dep 16D 10
; Note that the opcode for MOV M,M is used for HLT and will be tested
; elsewhere.
; MOV M,A (address 1016)
dep 16E 77
dep 16F 16
dep 170 10
; MOV A,B
dep 171 78
; MOV A,C
dep 172 79
; MOV A,D
dep 173 7A
; MOV A,E
dep 174 7B
; MOV A,H
dep 175 7C
; MOV A,L
dep 176 7D
; MOV A,M (address 1016)
dep 177 7E
dep 178 16
dep 179 10
; MOV A,A (effectively a NOP)
dep 17A 7F
;
; Verify MOV B,B
step
; Verify that registers are unchanged exept PC is 115
reg
; Verify MOV B,C
step
; Verify that B is AD, PC is 116, and other registers are unchanged
reg
; Verify MOV B,D
step
; Verify that B is BE, PC is 117, and other registers are unchanged
reg
; Verify MOV B,E
step
; Verify that B is EF, PC is 118, and other registers are unchanged
reg
; Verify MOV B,H
step
; Verify that B is 10, PC is 119, and other registers are unchanged
reg
; Verify MOV B,L
step
; Verify that B is 01, PC is 11A, and other registers are unchanged
reg
; Verify MOV B,M
step
; Verify that B is 37, PC is 11D, and other registers are unchanged
reg
; Verify MOV B,A
step
; Verify that B is 34, PC is 11E, and other registers are unchanged
reg
; Restore register B value
step
; Verify MOV C,B
step
; Verify that C is DE, PC is 121 and other registers are unchanged
reg
; Verify MOV C,C
step
; Verify that registers are unchanged exept PC is 122
reg
; Verify MOV C,D
step
; Verify that C is BE, PC is 123, and other registers are unchanged
reg
; Verify MOV C,E
step
; Verify that C is EF, PC is 124, and other registers are unchanged
reg
; Verify MOV C,H
step
; Verify that C is 10, PC is 125, and other registers are unchanged
reg
; Verify MOV C,L
step
; Verify that C is 01, PC is 126, and other registers are unchanged
reg
; Verify MOV C,M
step
; Verify that C is 2F, PC is 129, and other registers are unchanged
reg
; Verify MOV C,A
step
; Verify that C is 34, PC is 12A, and other registers are unchanged
reg
; Restore register C value
step
; Verify MOV D,B
step
; Verify that D is DE, PC is 12D, and other registers are unchanged
reg
; Verify MOV D,C
step
; Verify that D is AD, PC is 12E, and other registers are unchanged
reg
; Verify MOV D,D
step
; Verify that the registers are unchanged except PC is 12F
reg
; Verify MOV D,E
step
; Verify that D is EF, PC is 130, and other registers are unchanged
reg
; Verify MOV D,H
step
; Verify that D is 10, PC is 131, and other registers are unchanged
reg
; Verify MOV D,L
step
; Verify that D is 01, PC is 132, and other registers are unchanged
reg
; Verify MOV D,M
step
; Verify that D is 1E, PC is 135, and other registers are unchanged
reg
; Verify MOV D,A
step
; Verify that D is 34, PC is 136, and other registers are unchanged
reg
; Restore register D value
step
; Verify MOV E,B
step
; Verify that E is DE, PC is 139, and other registers are unchanged
reg
; Verify MOV E,C
step
; Verify that E is AD, PC is 13A, and other registers are unchanged
reg
; Verify MOV E,D
step
; Verify that E is BE, PC is 13B, and other registers are unchanged
reg
; Verify MOV E,E
step
; Verify that the registers are unchanged except PC is 13C
reg
; Verify MOV E,H
step
; Verify that E is 10, PC is 13D, and other registers are unchanged
reg
; Verify MOV E,L
step
; Verify that E is 01, PC is 13E, and other registers are unchanged
reg
; Verify MOV E,M
step
; Verify that E is 4F, PC is 141, and other registers are unchanged
reg
; Verify MOV E,A
step
; Verify that E is 34, PC is 142, and other registers are unchanged
reg
; Restore register E value
step
; Verify MOV H,B
step
; Verify that H is DE, PC is 145, and other registers are unchanged
reg
; Verify MOV H,C
step
; Verify that H is AD, PC is 146, and other registers are unchanged
reg
; Verify MOV H,D
step
; Verify that H is BE, PC is 147, and other registers are unchanged
reg
; Verify MOV H,E
step
; Verify that H is EF, PC is 148, and other registers are unchanged
reg
; Verify MOV H,H
step
; Verify that the registers are unchanged except PC is 149
reg
; Verify MOV H,L
step
; Verify that H is 01, PC is 14A, and other registers are unchanged
reg
; Verify MOV H,M
step
; Verify that H is 5A, PC is 14D, and other registers are unchanged
reg
; Verify MOV H,A
step
; Verify that H is 34, PC is 14E, and other registers are unchanged
reg
; Restore register H value
step
; Verify MOV L,B
step
; Verify that L is DE, PC is 151, and other registers are unchanged
reg
; Verify MOV L,C
step
; Verify that L is AD, PC is 152, and other registers are unchanged
reg
; Verify MOV L,D
step
; Verify that L is BE, PC is 153, and other registers are unchanged
reg
; Verify MOV L,E
step
; Verify that L is EF, PC is 154, and other registers are unchanged
reg
; Verify MOV L,H
step
; Verify that L is 10, PC is 155, and other registers are unchanged
reg
; Verify MOV L,L
step
; Verify that the registers are unchanged except PC is 156
reg
; Verify MOV L,M
step
; Verify that L is 62, PC is 159, and other registers are unchanged
reg
; Verify MOV L,A
step
; Verify that L is 34, PC is 15A, and other registers are unchanged
reg
; Restore register L value
step
; Check move to memory instructions
step
step
step
step
step
step
step
; Verify register values are in memory starting at address 1010 in order
; B, C, D, E, H, L, A
dump 0FF0
; Verify that register values are unchanged except PC is 171
reg
; Verify MOV A,B
step
; Verify that A is DE, PC is 172, and other registers are unchanged
reg
; Verify MOV A,C
step
; Verify that A is AD, PC is 173, and other registers are unchanged
reg
; Verify MOV A,D
step
; Verify that A is BE, PC is 174, and other registers are unchanged
reg
; Verify MOV A,E
step
; Verify that A is EF, PC is 175, and other registers are unchanged
reg
; Verify MOV A,H
step
; Verify that A is 10, PC is 176, and other registers are unchanged
reg
; Verify MOV A,L
step
; Verify that A is 01, PC is 177, and other registers are unchanged
reg
; Verify MOV A,M
step
; Verify that A is 34, PC is 17A, and other registers are unchanged
reg
; Verify MOV A,A
step
; Verify that the registers are unchanged except PC is 17B
reg
;
;  Test LXI x instructions
; LXI B,5678
dep 17B 01
dep 17C 78
dep 17D 56
; LXI D,9ABC
dep 17E 11
dep 17F BC
dep 180 9A
; LXI H,DEF0
dep 181 21
dep 182 F0
dep 183 DE
; LXI SP,2000
dep 184 31
dep 185 00
dep 186 20
;
; Verify LXI B,5678
step
; Verify that BC is 5678, PC is 17E, and other registers unchanged
reg
; Verify LXI D,5678
step
; Verify that DE is 9ABC, PC is 181, and other registers unchanged
reg
; Verify LXI H,DEF0
step
; Verify that DE is DEF0, PC is 184, and other registers unchanged
reg
; Verify LXI SP,2000
step
; Verify that SP is 2000, PC is 187, and other registers unchanged
reg
;
;  Test PUSH x instructions
; PUSH B
dep 187 C5
; PUSH D
dep 188 D5
; PUSH H
dep 189 E5
; PUSH PSW
dep 18A F5
; Verify PUSH B
step
; Verify that memory location 1FFE contains 78, 1FFF contains 56, SP
; is 1FFE, PC is 188, and other registers unchanged.
dump 1FF0
reg
; Verify PUSH D
step
; Verify that memory location 1FFC contains 9A, 1FFD contains BC, SP
; is 1FFC, PC is 189, and other registers unchanged.
dump 1FF0
reg
; Verify PUSH H
step
; Verify that memory location 1FFA contains DE, 1FFB contains F0, SP
; is 1FFA, PC is 18A, and other registers unchanged.
dump 1FF0
reg
; Verify PUSH PSW
step
; Verify that memory location 1FF8 contains 34, 1FF9 contains 02, SP
; is 1FF8, PC is 18B, and other registers unchanged.
dump 1FF0
reg
;  Test POP instructions
; POP B
dep 18B C1
; POP D
dep 18C D1
; POP H
dep 18D E1
; POP PSW
dep 18E F1
; Verify POP B
step
; verify that the register pair BC contains 3402, SP is 1FFA, PC is 18C
reg
; Verify POP D
step
; verify that the register pair DE contains DEF0, SP is 1FFC, PC is 18D
reg
; Verify POP H
step
; verify that the register pair HL contains 9ABC, SP is 1FFE, PC is 18E
reg
; Verify POP PSW
step
; verify that register A contains 56, flags are Z&A, SP is 2000, PC is 18F
reg
;
;  Test ANA instructions
; ANA B
dep 18F A0
; ANA C
dep 190 A1
; CMA
dep 191 2F
; ANA D
dep 192 A2
; ANA E
dep 193 A3
; ANA H
dep 194 A4
; CMA
dep 195 2F
; ANA L
dep 196 A5
; MVI H,01
dep 197 26
dep 198 01
; MVI L 2A
dep 199 2E
dep 19A 2A
; ANA M (Address 12A, contents 0E)
dep 19B A6
; ANA A (effectively a NOP)
dep 19C A7
;
; Verify ANA B
step
; Verify that register A contains 14, flags S&Z are clear, P is set, and PC is 190
reg
; Verify ANA C
step
; Verify that register A contains 00, flags S is clear, P&Z are set, and PC is 191
reg
; Verify ANA D
step
step
; Verify that register A contains DE, flags Z is clear, P&S are set, and PC is 193
reg
; Verify ANA E
step
; Verify that register A contains D0, flags Z&P are clear, S is set, and PC is 194
reg
; Verify ANA H
step
; Verify that register A contains 90, flags Z is clear, S&P are set, and PC is 195
reg
; Verify ANA L
step
step
; Verify that register A contains 2C, flags Z&S&P are clear, and PC is 197
reg
; Verify ANA M
step
step
step
; Verify that register A contains 0C, flags Z&S are clear, P is set, and PC is 19C
;  Note that HL is 012A for memory reference
reg
; Verify ANA A
step
; Verify that register are unchanged, and PC is 19D
reg
;
; Exit
quit
